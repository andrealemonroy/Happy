(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("signature_pad"),require("merge-images")):"function"==typeof define&&define.amd?define(["signature_pad","merge-images"],b):(a=a||self,a["vue-signature-pad"]=b(a.SignaturePad,a.mergeImages))})(this,function(a,b){'use strict';function c(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function d(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function e(a){for(var b,e=1;e<arguments.length;e++)b=null==arguments[e]?{}:arguments[e],e%2?d(b,!0).forEach(function(d){c(a,d,b[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):d(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function f(a){return g(a)||h(a)||i()}function g(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function h(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}a=a&&a.hasOwnProperty("default")?a["default"]:a,b=b&&b.hasOwnProperty("default")?b["default"]:b;var j=["image/png","image/jpeg","image/svg+xml"],k=function(a){return j.includes(a)},l={dotSize:3/2,minWidth:.5,maxWidth:2.5,throttle:16,minDistance:5,backgroundColor:"rgba(0,0,0,0)",penColor:"black",velocityFilterWeight:.7,onBegin:function(){},onEnd:function(){}},m=function(a){return JSON.parse(JSON.stringify(a))},n={src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",x:0,y:0},o={name:"VueSignaturePad",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},customStyle:{type:Object},saveType:{type:String,default:"image/png"},options:{type:Object,default:function(){return{}}},images:{type:Array,default:function(){return[]}}},data:function(){return{signaturePad:{},cacheImages:[],signatureData:n,onResizeHandler:null}},mounted:function(){var b=this.options,c=this.$refs.signaturePadCanvas,d=new a(c,e({},l,{},b));this.signaturePad=d,this.onResizeHandler=this.resizeCanvas.bind(this),window.addEventListener("resize",this.onResizeHandler,!1),this.resizeCanvas()},beforeDestroy:function(){this.onResizeHandler&&window.removeEventListener("resize",this.onResizeHandler,!1)},methods:{resizeCanvas:function(){var a=Math.max,b=this.$refs.signaturePadCanvas,c=this.signaturePad.toData(),d=a(window.devicePixelRatio||1,1);b.width=b.offsetWidth*d,b.height=b.offsetHeight*d,b.getContext("2d").scale(d,d),this.signaturePad.clear(),this.signatureData=n,this.signaturePad.fromData(c)},saveSignature:function(){var a=this.signaturePad,b=this.saveType,c={isEmpty:!1,data:void 0};if(!k(b))throw new Error("Image type is incorrect!");return a.isEmpty()?e({},c,{isEmpty:!0}):(this.signatureData=a.toDataURL(b),e({},c,{data:this.signatureData}))},undoSignature:function(){var a=this.signaturePad,b=a.toData();if(b)return a.fromData(b.slice(0,-1))},mergeImageAndSignature:function(a){return this.signatureData=a,b([].concat(f(this.images),f(this.cacheImages),[this.signatureData]))},addImages:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return this.cacheImages=[].concat(f(this.cacheImages),f(a)),b([].concat(f(this.images),f(this.cacheImages),[this.signatureData]))},fromDataURL:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length?arguments[2]:void 0;return this.signaturePad.fromDataURL(a,b,c)},fromData:function(a){return this.signaturePad.fromData(a)},toData:function(){return this.signaturePad.toData()},lockSignaturePad:function(){return this.signaturePad.off()},openSignaturePad:function(){return this.signaturePad.on()},isEmpty:function(){return this.signaturePad.isEmpty()},getPropImagesAndCacheImages:function(){return this.propsImagesAndCustomImages},clearCacheImages:function(){return this.cacheImages=[],this.cacheImages},clearSignature:function(){return this.signaturePad.clear()}},computed:{propsImagesAndCustomImages:function(){var a=m(this.images),b=m(this.cacheImages);return[].concat(f(a),f(b))}},watch:{options:function(a){var b=this;Object.keys(a).forEach(function(c){b.signaturePad[c]&&(b.signaturePad[c]=a[c])})}},render:function(a){var b=this.width,c=this.height,d=this.customStyle;return a("div",{style:e({width:b,height:c},d)},[a("canvas",{style:{width:"100%",height:"100%"},ref:"signaturePadCanvas"})])}};return o.install=function(a){return a.component(o.name,o)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),o});
