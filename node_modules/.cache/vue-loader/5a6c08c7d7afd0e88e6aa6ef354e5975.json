{"remainingRequest":"/Users/andreamonroy/Documents/Privado/happyland-vue/happyland/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreamonroy/Documents/Privado/happyland-vue/happyland/src/views/registerChild.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andreamonroy/Documents/Privado/happyland-vue/happyland/src/views/registerChild.vue","mtime":1578069310948},{"path":"/Users/andreamonroy/Documents/Privado/happyland-vue/happyland/node_modules/cache-loader/dist/cjs.js","mtime":1575991294243},{"path":"/Users/andreamonroy/Documents/Privado/happyland-vue/happyland/node_modules/vue-loader/lib/index.js","mtime":1576527882455}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAiLi4vYXNzZXRzL2Nzcy9zdHlsZS5jc3MiOwppbXBvcnQgKiBhcyBBcGkgZnJvbSAiLi4vLi4vc2VydmVyL2luZGV4IjsKaW1wb3J0IGxvY2FsU3RvcmFnZSBmcm9tICJsb2NhbFN0b3JhZ2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgY29uc3QgdmFsaWRhdGVQaG9uZU51bWJlciA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgY29uc3QgcmVnID0gbmV3IFJlZ0V4cCgiXihbMC05XXs5LH0pJCIpOwogICAgICBpZiAodmFsdWUgPT09ICIiIHx8ICF2YWx1ZSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigiTsO6bWVybyB0ZWxlZsOzbmljbyBlcyByZXF1ZXJpZG8iKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoICE9PSA5KSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCJEZWJlIHNlciBzw7NsbyA5IGTDrWdpdG9zIikpOwogICAgICB9IGVsc2UgaWYgKCFyZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIkZvcm1hdG8gbsO6bWVybyB0ZWxlZsOzbmljbyBlcyBpbnbDoWxpZG8iKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHZhbGlkYXRlaWRlbnRpdHlEb2N1bWVudE51bWJlciA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgLy8gL1teMC05XS9naQogICAgICBjb25zdCByZWcgPSBuZXcgUmVnRXhwKCJeKFtBLVowLTldezgsOX0pJCIpOwogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCJObyBwdWVkZSBlc3RhciB2YWPDrW8iKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoICE9PSA4IHx8IGlzTmFOKHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigiRWwgbsO6bWVybyBkZSBkb2N1bWVudG8gZGViZSBzZXIgZGUgOCBuw7ptZXJvcyIpKTsKICAgICAgfSBlbHNlIGlmICghcmVnLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCJGb3JtYXRvIGludsOhbGlkbyIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgY2hpbGRGb3JtOiB7CiAgICAgICAgbmFtZXM6ICIiLAogICAgICAgIHN1cm5hbWU6ICIiLAogICAgICAgIGlkZW50aXR5RG9jdW1lbnROdW1iZXI6ICIiLAogICAgICAgIGdlbmRlcjogIiIsCiAgICAgICAgYmlydGhkYXk6ICIiCiAgICAgIH0sCiAgICAgIG90aGVyUmVsYXRpdmU6IGZhbHNlLAogICAgICBvdGhlclJlbGF0aXZlTW9kZWw6ICIiLAogICAgICB2YWxpZGF0ZUZvcm06IHsKICAgICAgICBuYW1lczogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIkVsIG5vbWJyZSBlcyByZXF1ZXJpZG8iLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHN1cm5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJFbCBhcGVsbGlkbyBlcyByZXF1ZXJpZG8iLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIGlkZW50aXR5RG9jdW1lbnROdW1iZXI6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVpZGVudGl0eURvY3VtZW50TnVtYmVyLAogICAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgZ2VuZGVyOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAiRWwgZ8OpbmVybyBlcyByZXF1ZXJpZG8iLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgIF0sCiAgICAgICAgcmVsYXRpdmU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJFbCBwYXJlbnRlc2NvIGVzIHJlcXVlcmlkbyIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgYmlydGhkYXk6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICJkYXRlIiwKICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBuZXh0UGFnZSgpIHsKICAgICAgdGhpcy4kcmVmc1siY2hpbGRGb3JtIl0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuY2hpbGRGb3JtLnJlbGF0aXZlID09ICJPdHJvIikgewogICAgICAgICAgICB0aGlzLm90aGVyUmVsYXRpdmUgPSB0cnVlOwogICAgICAgICAgICBkZWxldGUgdGhpcy5jaGlsZEZvcm0ucmVsYXRpdmU7CiAgICAgICAgICAgIGlmICh0aGlzLm90aGVyUmVsYXRpdmVNb2RlbCAhPSAiIikgewogICAgICAgICAgICAgIHRoaXMuY2hpbGRGb3JtLnJlbGF0aXZlID0gdGhpcy5vdGhlclJlbGF0aXZlTW9kZWw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiRXJyb3IgZW4gZWwgcmVnaXN0cm8iLAogICAgICAgICAgICAgICAgZGVzYzogIkRlYmUgY29tcGxldGFyIGVsIHBhcmVudGVzY28iCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGFnZSA9IG1vbWVudCgpLmRpZmYodGhpcy5jaGlsZEZvcm0uYmlydGhkYXksICJ5ZWFycyIpOwogICAgICAgICAgdGhpcy5jaGlsZEZvcm0uYWdlID0gYWdlOwogICAgICAgICAgQXBpLnJlZ2lzdGVyQ2hpbGQodGhpcy5jaGlsZEZvcm0pCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgY29uc3QgaWRQYXJlbnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicGFyZW50SWQiKTsKICAgICAgICAgICAgICAgIEFwaS5yZWdpc3RlckNoaWxkVG9QYXJlbnQocmVzLmRhdGEsIGlkUGFyZW50KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJndWFyZGFkbyBjb24gw6l4aXRvIik7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbGlzdE9mQ2hpbGRzIik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJFcnJvciBlbiBlbCByZWdpc3RybyIsCiAgICAgICAgICAgICAgICAgIGRlc2M6ICJZYSBleGlzdGUgZWwgcmVnaXN0cm8gZGVsIG5pw7FvIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgICB0aXRsZTogIkVycm9yIGVuIGVsIHJlZ2lzdHJvIiwKICAgICAgICAgICAgICAgIGRlc2M6ICJZYSBleGlzdGUgZWwgcmVnaXN0cm8gZGVsIG5pw7FvIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICJIYXkgY2FtcG9zIGludsOhbGlkb3MgZW4gZWwgZm9ybXVsYXJpbyIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["registerChild.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"registerChild.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section class=\"center mt-60 font-20 scroll\">\n    <h1>INGRESA LA INFORMACION DEL NIÑO</h1>\n    <Form\n      ref=\"childForm\"\n      :model=\"childForm\"\n      :rules=\"validateForm\"\n      class=\"mt-60\"\n      label-position=\"top\"\n    >\n      <Row type=\"flex\" justify=\"space-around\">\n        <Col span=\"7\">\n          <FormItem prop=\"names\" label=\"Nombre\"\n            ><Input v-model=\"childForm.names\" placeholder=\"ej. Andrea\"></Input\n          ></FormItem>\n        </Col>\n        <Col span=\"7\">\n          <FormItem prop=\"surname\" label=\"Apellidos\"\n            ><Input\n              v-model=\"childForm.surname\"\n              placeholder=\"ej. Sánchez López\"\n            ></Input\n          ></FormItem>\n        </Col>\n        <Col span=\"7\">\n          <FormItem prop=\"identityDocumentNumber\" label=\"DNI del niño\"\n            ><Input\n              v-model=\"childForm.identityDocumentNumber\"\n              placeholder=\"ej. 12345678\"\n            ></Input\n          ></FormItem>\n        </Col>\n      </Row>\n      <Row type=\"flex\" justify=\"space-around\">\n        <Col span=\"7\">\n          <FormItem prop=\"birthday\" label=\"Fecha de nacimiento\">\n            <DatePicker\n              type=\"date\"\n              :editable=\"true\"\n              format=\"yyyy-MM-dd\"\n              :confirm=\"false\"\n              placeholder=\"Fecha de nacimiento\"\n              v-model=\"childForm.birthday\"\n            ></DatePicker>\n          </FormItem>\n        </Col>\n        <Col span=\"7\">\n          <FormItem prop=\"relative\" label=\"Parentesco\">\n            <Select placeholder=\"Seleccione\" v-model=\"childForm.relative\">\n              <Option value=\"Hijo(a)\">Hijo(a)</Option>\n              <Option value=\"Hermano(a)\">Hermano(a)</Option>\n              <Option value=\"Primo(a)\">Primo(a)</Option>\n              <Option value=\"Sobrino(a)\">Sobrino(a)</Option>\n              <Option value=\"Nieto(a)\">Nieto(a)</Option>\n              <Option value=\"Otro\">Otro</Option>\n            </Select>\n          </FormItem>\n          <FormItem v-if=\"otherRelative\" prop=\"relative\" label=\"Parentesco\">\n            <Input\n              placeholder=\"Ingrese parentesco\"\n              v-model=\"otherRelativeModel\"\n            />\n          </FormItem>\n        </Col>\n        <Col span=\"7\">\n          <FormItem prop=\"gender\" label=\"Género\">\n            <RadioGroup v-model=\"childForm.gender\">\n              <Radio label=\"female\">Femenino</Radio>\n              <Radio label=\"male\">Masculino</Radio>\n            </RadioGroup>\n          </FormItem>\n        </Col>\n        <Col span=\"7\"> </Col>\n      </Row>\n      <Button @click=\"nextPage\">Siguiente</Button>\n    </Form>\n  </section>\n</template>\n<script>\nimport \"../assets/css/style.css\";\nimport * as Api from \"../../server/index\";\nimport localStorage from \"localStorage\";\nimport moment from \"moment\";\nexport default {\n  data() {\n    const validatePhoneNumber = (rule, value, callback) => {\n      const reg = new RegExp(\"^([0-9]{9,})$\");\n      if (value === \"\" || !value) {\n        callback(new Error(\"Número telefónico es requerido\"));\n      } else if (value.length !== 9) {\n        callback(new Error(\"Debe ser sólo 9 dígitos\"));\n      } else if (!reg.test(value)) {\n        callback(new Error(\"Formato número telefónico es inválido\"));\n      } else {\n        callback();\n      }\n    };\n    const validateidentityDocumentNumber = (rule, value, callback) => {\n      // /[^0-9]/gi\n      const reg = new RegExp(\"^([A-Z0-9]{8,9})$\");\n      if (value === \"\") {\n        callback(new Error(\"No puede estar vacío\"));\n      } else if (value.length !== 8 || isNaN(value)) {\n        callback(new Error(\"El número de documento debe ser de 8 números\"));\n      } else if (!reg.test(value)) {\n        callback(new Error(\"Formato inválido\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      childForm: {\n        names: \"\",\n        surname: \"\",\n        identityDocumentNumber: \"\",\n        gender: \"\",\n        birthday: \"\"\n      },\n      otherRelative: false,\n      otherRelativeModel: \"\",\n      validateForm: {\n        names: [\n          {\n            required: true,\n            message: \"El nombre es requerido\",\n            trigger: \"blur\"\n          }\n        ],\n        surname: [\n          {\n            required: true,\n            message: \"El apellido es requerido\",\n            trigger: \"blur\"\n          }\n        ],\n        identityDocumentNumber: [\n          {\n            required: true,\n            validator: validateidentityDocumentNumber,\n            trigger: \"change\"\n          }\n        ],\n        gender: [\n          { required: true, message: \"El género es requerido\", trigger: \"blur\" }\n        ],\n        relative: [\n          {\n            required: true,\n            message: \"El parentesco es requerido\",\n            trigger: \"blur\"\n          }\n        ],\n        birthday: [\n          {\n            required: true,\n            type: \"date\",\n            trigger: \"change\"\n          }\n        ]\n      }\n    };\n  },\n  methods: {\n    async nextPage() {\n      this.$refs[\"childForm\"].validate(async valid => {\n        if (valid) {\n          if (this.childForm.relative == \"Otro\") {\n            this.otherRelative = true;\n            delete this.childForm.relative;\n            if (this.otherRelativeModel != \"\") {\n              this.childForm.relative = this.otherRelativeModel;\n            } else {\n              this.$Notice.error({\n                title: \"Error en el registro\",\n                desc: \"Debe completar el parentesco\"\n              });\n            }\n          }\n          const age = moment().diff(this.childForm.birthday, \"years\");\n          this.childForm.age = age;\n          Api.registerChild(this.childForm)\n            .then(res => {\n              if (res.status === 200) {\n                const idParent = localStorage.getItem(\"parentId\");\n                Api.registerChildToParent(res.data, idParent).then(res => {\n                  console.log(res);\n                  console.log(\"guardado con éxito\");\n                  this.$router.push(\"/listOfChilds\");\n                });\n              } else {\n                this.$Notice.error({\n                  title: \"Error en el registro\",\n                  desc: \"Ya existe el registro del niño\"\n                });\n              }\n            })\n            .catch(error => {\n              this.$Notice.error({\n                title: \"Error en el registro\",\n                desc: \"Ya existe el registro del niño\"\n              });\n            });\n        } else {\n          this.$Notice.error({\n            title: \"Hay campos inválidos en el formulario\"\n          });\n        }\n      });\n    }\n  }\n};\n</script>\n"]}]}