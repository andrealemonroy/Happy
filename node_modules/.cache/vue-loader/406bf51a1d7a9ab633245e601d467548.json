{"remainingRequest":"C:\\Users\\Administrador\\Happy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrador\\Happy\\src\\views\\registerChild.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrador\\Happy\\src\\views\\registerChild.vue","mtime":1578079458693},{"path":"C:\\Users\\Administrador\\Happy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1578077751119},{"path":"C:\\Users\\Administrador\\Happy\\node_modules\\vue-loader\\lib\\index.js","mtime":1578077754156}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgIi4uL2Fzc2V0cy9jc3Mvc3R5bGUuY3NzIjsNCmltcG9ydCAqIGFzIEFwaSBmcm9tICIuLi8uLi9zZXJ2ZXIvaW5kZXgiOw0KaW1wb3J0IGxvY2FsU3RvcmFnZSBmcm9tICJsb2NhbFN0b3JhZ2UiOw0KaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIGNvbnN0IHZhbGlkYXRlUGhvbmVOdW1iZXIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICBjb25zdCByZWcgPSBuZXcgUmVnRXhwKCJeKFswLTldezksfSkkIik7DQogICAgICBpZiAodmFsdWUgPT09ICIiIHx8ICF2YWx1ZSkgew0KICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIk7Dum1lcm8gdGVsZWbDs25pY28gZXMgcmVxdWVyaWRvIikpOw0KICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggIT09IDkpIHsNCiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCJEZWJlIHNlciBzw7NsbyA5IGTDrWdpdG9zIikpOw0KICAgICAgfSBlbHNlIGlmICghcmVnLnRlc3QodmFsdWUpKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigiRm9ybWF0byBuw7ptZXJvIHRlbGVmw7NuaWNvIGVzIGludsOhbGlkbyIpKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNhbGxiYWNrKCk7DQogICAgICB9DQogICAgfTsNCiAgICBjb25zdCB2YWxpZGF0ZWlkZW50aXR5RG9jdW1lbnROdW1iZXIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAvLyAvW14wLTldL2dpDQogICAgICBjb25zdCByZWcgPSBuZXcgUmVnRXhwKCJeKFtBLVowLTldezgsOX0pJCIpOw0KICAgICAgaWYgKHZhbHVlID09PSAiIikgew0KICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIk5vIHB1ZWRlIGVzdGFyIHZhY8OtbyIpKTsNCiAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoICE9PSA4IHx8IGlzTmFOKHZhbHVlKSkgew0KICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIkVsIG7Dum1lcm8gZGUgZG9jdW1lbnRvIGRlYmUgc2VyIGRlIDggbsO6bWVyb3MiKSk7DQogICAgICB9IGVsc2UgaWYgKCFyZWcudGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCJGb3JtYXRvIGludsOhbGlkbyIpKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNhbGxiYWNrKCk7DQogICAgICB9DQogICAgfTsNCiAgICByZXR1cm4gew0KICAgICAgY2hpbGRGb3JtOiB7DQogICAgICAgIG5hbWVzOiAiIiwNCiAgICAgICAgc3VybmFtZTogIiIsDQogICAgICAgIGlkZW50aXR5RG9jdW1lbnROdW1iZXI6ICIiLA0KICAgICAgICBnZW5kZXI6ICIiLA0KICAgICAgICBiaXJ0aGRheTogIiINCiAgICAgIH0sDQogICAgICBvdGhlclJlbGF0aXZlOiBmYWxzZSwNCiAgICAgIG90aGVyUmVsYXRpdmVNb2RlbDogIiIsDQogICAgICB2YWxpZGF0ZUZvcm06IHsNCiAgICAgICAgbmFtZXM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICJFbCBub21icmUgZXMgcmVxdWVyaWRvIiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgc3VybmFtZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogIkVsIGFwZWxsaWRvIGVzIHJlcXVlcmlkbyIsDQogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciINCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIGlkZW50aXR5RG9jdW1lbnROdW1iZXI6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVpZGVudGl0eURvY3VtZW50TnVtYmVyLA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSINCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIGdlbmRlcjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJFbCBnw6luZXJvIGVzIHJlcXVlcmlkbyIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIF0sDQogICAgICAgIHJlbGF0aXZlOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiAiRWwgcGFyZW50ZXNjbyBlcyByZXF1ZXJpZG8iLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBiaXJ0aGRheTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgdHlwZTogImRhdGUiLA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSINCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgbmV4dFBhZ2UoKSB7DQogICAgICB0aGlzLiRyZWZzWyJjaGlsZEZvcm0iXS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGlmICh0aGlzLmNoaWxkRm9ybS5yZWxhdGl2ZSA9PSAiT3RybyIpIHsNCiAgICAgICAgICAgIHRoaXMub3RoZXJSZWxhdGl2ZSA9IHRydWU7DQogICAgICAgICAgICBkZWxldGUgdGhpcy5jaGlsZEZvcm0ucmVsYXRpdmU7DQogICAgICAgICAgICBpZiAodGhpcy5vdGhlclJlbGF0aXZlTW9kZWwgIT0gIiIpIHsNCiAgICAgICAgICAgICAgdGhpcy5jaGlsZEZvcm0ucmVsYXRpdmUgPSB0aGlzLm90aGVyUmVsYXRpdmVNb2RlbDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7DQogICAgICAgICAgICAgICAgdGl0bGU6ICJFcnJvciBlbiBlbCByZWdpc3RybyIsDQogICAgICAgICAgICAgICAgZGVzYzogIkRlYmUgY29tcGxldGFyIGVsIHBhcmVudGVzY28iDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBjb25zdCBhZ2UgPSBtb21lbnQoKS5kaWZmKHRoaXMuY2hpbGRGb3JtLmJpcnRoZGF5LCAieWVhcnMiKTsNCiAgICAgICAgICB0aGlzLmNoaWxkRm9ybS5hZ2UgPSBhZ2U7DQogICAgICAgICAgQXBpLnJlZ2lzdGVyQ2hpbGQodGhpcy5jaGlsZEZvcm0pDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgY29uc3QgaWRQYXJlbnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicGFyZW50SWQiKTsNCiAgICAgICAgICAgICAgICBBcGkucmVnaXN0ZXJDaGlsZFRvUGFyZW50KHJlcy5kYXRhLCBpZFBhcmVudCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJndWFyZGFkbyBjb24gw6l4aXRvIik7DQogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xpc3RPZkNoaWxkcyIpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7DQogICAgICAgICAgICAgICAgICB0aXRsZTogIkVycm9yIGVuIGVsIHJlZ2lzdHJvIiwNCiAgICAgICAgICAgICAgICAgIGRlc2M6ICJZYSBleGlzdGUgZWwgcmVnaXN0cm8gZGVsIG5pw7FvIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsNCiAgICAgICAgICAgICAgICB0aXRsZTogIkVycm9yIGVuIGVsIHJlZ2lzdHJvIiwNCiAgICAgICAgICAgICAgICBkZXNjOiAiWWEgZXhpc3RlIGVsIHJlZ2lzdHJvIGRlbCBuacOxbyINCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3Ioew0KICAgICAgICAgICAgdGl0bGU6ICJIYXkgY2FtcG9zIGludsOhbGlkb3MgZW4gZWwgZm9ybXVsYXJpbyINCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["registerChild.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"registerChild.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <section class=\"center mt-60 font-20 scroll\">\r\n    <h1>INGRESA LA INFORMACION DEL NIÑO</h1>\r\n    <Form\r\n      ref=\"childForm\"\r\n      :model=\"childForm\"\r\n      :rules=\"validateForm\"\r\n      class=\"mt-60\"\r\n      label-position=\"top\"\r\n    >\r\n      <Row type=\"flex\" justify=\"space-around\">\r\n        <Col span=\"7\">\r\n          <FormItem prop=\"names\" label=\"Nombre\"\r\n            ><Input v-model=\"childForm.names\" placeholder=\"ej. Andrea\"></Input\r\n          ></FormItem>\r\n        </Col>\r\n        <Col span=\"7\">\r\n          <FormItem prop=\"surname\" label=\"Apellidos\"\r\n            ><Input\r\n              v-model=\"childForm.surname\"\r\n              placeholder=\"ej. Sánchez López\"\r\n            ></Input\r\n          ></FormItem>\r\n        </Col>\r\n        <Col span=\"7\">\r\n          <FormItem prop=\"identityDocumentNumber\" label=\"DNI del niño\"\r\n            ><Input\r\n              v-model=\"childForm.identityDocumentNumber\"\r\n              placeholder=\"ej. 12345678\"\r\n            ></Input\r\n          ></FormItem>\r\n        </Col>\r\n      </Row>\r\n      <Row type=\"flex\" justify=\"space-around\">\r\n        <Col span=\"7\">\r\n          <FormItem prop=\"birthday\" label=\"Fecha de nacimiento\">\r\n            <DatePicker\r\n              type=\"date\"\r\n              :editable=\"true\"\r\n              format=\"yyyy-MM-dd\"\r\n              :confirm=\"false\"\r\n              placeholder=\"Fecha de nacimiento\"\r\n              v-model=\"childForm.birthday\"\r\n            ></DatePicker>\r\n          </FormItem>\r\n        </Col>\r\n        <Col span=\"7\">\r\n          <FormItem prop=\"relative\" label=\"Parentesco\">\r\n            <Select placeholder=\"Seleccione\" v-model=\"childForm.relative\">\r\n              <Option value=\"Hijo(a)\">Hijo(a)</Option>\r\n              <Option value=\"Hermano(a)\">Hermano(a)</Option>\r\n              <Option value=\"Primo(a)\">Primo(a)</Option>\r\n              <Option value=\"Sobrino(a)\">Sobrino(a)</Option>\r\n              <Option value=\"Nieto(a)\">Nieto(a)</Option>\r\n              <Option value=\"Otro\">Otro</Option>\r\n            </Select>\r\n          </FormItem>\r\n          <FormItem v-if=\"otherRelative\" prop=\"relative\" label=\"Parentesco\">\r\n            <Input\r\n              placeholder=\"Ingrese parentesco\"\r\n              v-model=\"otherRelativeModel\"\r\n            />\r\n          </FormItem>\r\n        </Col>\r\n        <Col span=\"7\">\r\n          <FormItem prop=\"gender\" label=\"Género\">\r\n            <RadioGroup v-model=\"childForm.gender\">\r\n              <Radio label=\"female\">Femenino</Radio>\r\n              <Radio label=\"male\">Masculino</Radio>\r\n            </RadioGroup>\r\n          </FormItem>\r\n        </Col>\r\n        <Col span=\"7\"> </Col>\r\n      </Row>\r\n      <Button @click=\"nextPage\">Siguiente</Button>\r\n    </Form>\r\n  </section>\r\n</template>\r\n<script>\r\nimport \"../assets/css/style.css\";\r\nimport * as Api from \"../../server/index\";\r\nimport localStorage from \"localStorage\";\r\nimport moment from \"moment\";\r\nexport default {\r\n  data() {\r\n    const validatePhoneNumber = (rule, value, callback) => {\r\n      const reg = new RegExp(\"^([0-9]{9,})$\");\r\n      if (value === \"\" || !value) {\r\n        callback(new Error(\"Número telefónico es requerido\"));\r\n      } else if (value.length !== 9) {\r\n        callback(new Error(\"Debe ser sólo 9 dígitos\"));\r\n      } else if (!reg.test(value)) {\r\n        callback(new Error(\"Formato número telefónico es inválido\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    const validateidentityDocumentNumber = (rule, value, callback) => {\r\n      // /[^0-9]/gi\r\n      const reg = new RegExp(\"^([A-Z0-9]{8,9})$\");\r\n      if (value === \"\") {\r\n        callback(new Error(\"No puede estar vacío\"));\r\n      } else if (value.length !== 8 || isNaN(value)) {\r\n        callback(new Error(\"El número de documento debe ser de 8 números\"));\r\n      } else if (!reg.test(value)) {\r\n        callback(new Error(\"Formato inválido\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      childForm: {\r\n        names: \"\",\r\n        surname: \"\",\r\n        identityDocumentNumber: \"\",\r\n        gender: \"\",\r\n        birthday: \"\"\r\n      },\r\n      otherRelative: false,\r\n      otherRelativeModel: \"\",\r\n      validateForm: {\r\n        names: [\r\n          {\r\n            required: true,\r\n            message: \"El nombre es requerido\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        surname: [\r\n          {\r\n            required: true,\r\n            message: \"El apellido es requerido\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        identityDocumentNumber: [\r\n          {\r\n            required: true,\r\n            validator: validateidentityDocumentNumber,\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        gender: [\r\n          { required: true, message: \"El género es requerido\", trigger: \"blur\" }\r\n        ],\r\n        relative: [\r\n          {\r\n            required: true,\r\n            message: \"El parentesco es requerido\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        birthday: [\r\n          {\r\n            required: true,\r\n            type: \"date\",\r\n            trigger: \"change\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async nextPage() {\r\n      this.$refs[\"childForm\"].validate(async valid => {\r\n        if (valid) {\r\n          if (this.childForm.relative == \"Otro\") {\r\n            this.otherRelative = true;\r\n            delete this.childForm.relative;\r\n            if (this.otherRelativeModel != \"\") {\r\n              this.childForm.relative = this.otherRelativeModel;\r\n            } else {\r\n              this.$Notice.error({\r\n                title: \"Error en el registro\",\r\n                desc: \"Debe completar el parentesco\"\r\n              });\r\n            }\r\n          }\r\n          const age = moment().diff(this.childForm.birthday, \"years\");\r\n          this.childForm.age = age;\r\n          Api.registerChild(this.childForm)\r\n            .then(res => {\r\n              if (res.status === 200) {\r\n                const idParent = localStorage.getItem(\"parentId\");\r\n                Api.registerChildToParent(res.data, idParent).then(res => {\r\n                  console.log(res);\r\n                  console.log(\"guardado con éxito\");\r\n                  this.$router.push(\"/listOfChilds\");\r\n                });\r\n              } else {\r\n                this.$Notice.error({\r\n                  title: \"Error en el registro\",\r\n                  desc: \"Ya existe el registro del niño\"\r\n                });\r\n              }\r\n            })\r\n            .catch(error => {\r\n              this.$Notice.error({\r\n                title: \"Error en el registro\",\r\n                desc: \"Ya existe el registro del niño\"\r\n              });\r\n            });\r\n        } else {\r\n          this.$Notice.error({\r\n            title: \"Hay campos inválidos en el formulario\"\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}