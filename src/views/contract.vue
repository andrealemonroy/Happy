<template>
  <section class="font-20 justify center mt-60 scroll">
    <Row type="flex" justify="center" class="mt-60">
      <Col span="20">
        <p style="text-align:center;">
          <strong
            ><u
              ><span style="font-size:20px;line-height:107%;"
                >ACUERDO DE USO DE INSTALACIONES– Sociedad HAPPYLAND Perú
                S.A.</span
              ></u
            ></strong
          >
        </p>
        <br />
        <p style="text-align:justify;">
          <strong
            >1 - Acuerdo del participante, liberación y asunción de
            riesgos&nbsp;</strong
          >
        </p>
        <br />
        <p style="text-align:justify;">
          Elegí voluntariamente usar y permitir que los menores de edad
          identificados anteriormente, los cuales se encuentran bajo mi tutela,
          y han sido referidos individual y colectivamente en este documento
          como "menor de edad ", usen las instalaciones y equipos de
          <strong>Sociedad HAPPYLAND Perú S.A.</strong
          ><span style="color:red;">&nbsp;</span>ubicados en centro comercial
          Mall Aventura Santa Anita<span style="color:red;">&nbsp;</span> Zona
          de<span style="color:red;">&nbsp;</span>Happyland Adventure. En
          consideración a que se nos permita usar dichas instalaciones y
          equipos, y cualquier otro servicio proporcionado por
          <strong>Sociedad Happyland Perú S.A.</strong> o sus empleados o
          agentes en dicha ubicación, o en cualquier otra ubicación dentro de la
          ciudad de Lima, declaro, reconozco y acepto lo siguiente:
        </p>
        <ul style="margin-left:40px">
          <li>
            Reconozco y acepto que este Acuerdo cubre y está destinado a liberar
            y proporcionar otros beneficios, protecciones legales y
            consideraciones a favor de
            <strong>Sociedad HAPPYLAND Perú S.A.</strong>, y sus respectivos
            agentes y colectivos, propietarios, funcionarios, gerentes,
            accionistas, afiliados, voluntarios, participantes, empleados, y
            todas las demás personas o entidades que actúen en cualquier
            capacidad en su nombre respectivo o colectivo.
          </li>
          <li>
            Reconozco y acepto que el uso de los equipos de la Zona de Happyland
            Adventure, así como otros equipos de propiedad de
            <strong>Sociedad HAPPYLAND Perú S.A.</strong> pueden conllevar
            riesgos, los cuales incluyen lesiones físicas o emocionales graves,
            muerte, daños a mí mismo, a los menor de edad &nbsp;y/o a terceros,
            y daños a la propiedad personal de cualquiera o todas esas personas.
            Entiendo que tales riesgos no pueden eliminarse, ya que forman parte
            inherente de las cualidades esenciales de la actividad recreativa,
            lo cual acepto y reconozco completamente de forma voluntaria.&nbsp;
          </li>
          <li>
            Reconozco y acepto que, si bien los empleados de
            <strong>Sociedad HAPPYLAND Perú S.A.</strong> supervisan
            generalmente la Zona de Happyland Adventure y otras actividades
            localizadas en otras zonas que tienen lugar en los locales de
            <strong>Sociedad HAPPYLAND Perú S.A.</strong>, no es factible que
            dichos empleados supervisen las actividades y acciones de todos los
            clientes en todo momento o en forma simultáneamente.&nbsp;
          </li>
          <li>
            Reconozco y acepto que yo y los menores de edad estamos participando
            voluntariamente bajo nuestro propio riesgo.
          </li>
          <li>
            Reconozco y acepto que las acciones o actividades de otros clientes
            podrían causarme a mí o a los menores de edad lesiones corporales
            significativas &nbsp; y que
            <strong>Sociedad HAPPYLAND Perú S.A.</strong> no es responsable de
            las acciones o actividades de clientes que usan las instalaciones de
            <strong>Sociedad HAPPYLAND Perú S.A.</strong>, incluyendo la zona
            Happyland Adventure. Algunos de los riesgos incluyen, entre otros,
            los siguientes:
          </li>
        </ul>
        <p>&nbsp;</p>
        <p style="text-align:justify; margin-left:80px">
          a) Los participantes podrían llegar a morir o quedar paralizados,
          parcial o totalmente, a través del uso de las instalaciones de
          <strong>Sociedad HAPPYLAND Perú S.A.</strong>, incluyendo la zona
          Happyland Adventure.
        </p>
        <p style="text-align:justify; margin-left:80px">
          b) Los participantes pueden sufrir cortes, raspones, golpes,
          contusiones, conmociones cerebrales, a través del uso del equipo de
          <strong>Sociedad HAPPYLAND Perú S.A.</strong>, o el contacto con otros
          participantes o superficies con las que han contactado. Los
          participantes pueden torcerse, jalar, romperse o lesionarse gravemente
          externa o internamente la cabeza, cara (incluyendo nariz y dientes /
          mandíbula), cuello, torso, columna vertebral, brazos, muñecas, manos,
          piernas, tobillos, pies u otras partes del cuerpo como resultado de
          caerse del trampolín o de otros equipos, aterrizar de manera
          inadecuada en los trampolines u otros equipos o ponerse en contacto
          con otros participantes. Como se señaló en el párrafo a) anterior,
          tales lesiones pueden conducir a parálisis, desfiguración o muerte. La
          participación puede provocar un golpe de calor, ataques cardíacos,
          deshidratación y otros eventos médicos relacionados con el esfuerzo.
        </p>
        <p style="text-align:justify; margin-left:80px">
          c) Los participantes pueden caerse unos sobre otros, resultando en
          huesos rotos y otras lesiones graves. El doble rebote, más de una
          persona por trampolín, voltearse, correr y rebotar en las paredes y
          los trampolines montados en la pared, y otros movimientos corporales
          participantes (ya sean planificados o no) pueden crear un efecto de
          rebote y conducir a movimientos corporales impredecibles y anticipados
          o contacto corporal no anticipado, cualquiera de los cuales puede
          provocar lesiones graves.
        </p>
        <p style="text-align:justify; margin-left:80px">
          d) Hacer uso del área de los trampolines, puede provocar lesiones
          físicas similares (incluso si el participante no está rebotando en ese
          momento).
        </p>
        <p>&nbsp;</p>
        <p style="text-align:justify; margin-left:80px">
          e) Observar, pararse, sentarse o tomar fotografías en o cerca de
          cualquier trampolín o actividad puede ocasionar lesiones físicas
          similares (incluso si el observador no participa en ese momento).
        </p>
        <ul style="margin-left:40px">
          <li>
            Reconozco, acepto y asumo el riesgo de todas y cada una de las
            condiciones médicas, limitaciones o discapacidades (ya sean
            temporales o permanentes) que yo o los menor es de edad
            &nbsp;poseamos, ya sean conocidas o desconocidas, que puedan
            contribuir o exacerbar cualquier lesión que yo o los menores de edad
            &nbsp;podríamos sostener como resultado del uso de las instalaciones
            de <strong>Sociedad HAPPYLAND Perú S.A.</strong> o cualquiera de sus
            equipos.&nbsp;
          </li>
        </ul>
        <p style="margin-left:14.2pt;text-align:justify;text-indent:-14.2pt;">
          &nbsp;
        </p>
        <ul style="margin-left:40px">
          <li>
            Reconozco y acepto que si se requiere o se realiza asistencia médica
            (de cualquier forma, incluida la atención de emergencia,
            hospitalización, atención ambulatoria y/o fisioterapia) como
            resultado de cualquier lesión que yo o los menores de edad suframos
            mientras usamos la Zona de Happyland Adventure o cualquier otra zona
            de <strong>Sociedad HAPPYLAND Perú S.A.</strong>, dicha asistencia
            correrá por mi cuenta. Sin perjuicio de ello,
            <strong>Sociedad HAPPYLAND Perú S.A.</strong> podrá prestar primeros
            auxilios en caso sea necesario, conforme sus políticas internas.
          </li>
        </ul>
        <p style="margin-left:14.2pt;text-indent:-14.2pt;">&nbsp;</p>
        <p style="margin-left:21.3pt;text-align:justify;">&nbsp;</p>
        <br />
        <p style="text-align:justify;">
          <strong>2 - FOTO / VIDEO / RENUNCIA A MEDIOS SOCIALES</strong>
        </p>
        <br />
        <p style="text-align:justify;">
          <span lang="ES-PE"
            >En relación con el uso de las instalaciones de la zona Happyland
            Adventure y otras zonas a las que yo y los menor de edad podamos
            tener acceso, en mi calidad de titular de la patria potestad o tutor
            de los menores, doy mi consentimiento libre, previo, expreso e
            inequívoco para el tratamiento de mis datos personales y los de los
            menores.</span
          >
        </p>
        <p style="text-align:justify;">
          En ese sentido, doy mi autorización para la grabación de los menores
          de edad &nbsp;y mi imagen física y/o voz a través de medios mecánicos,
          fotográficos, técnicos, digitales, electrónicos u otros
          ("Grabaciones"). Por la presente, doy mi consentimiento y autorizo a
          <strong>Sociedad HAPPYLAND Perú S.A.</strong> y sus agentes,
          representantes, empleados, sucesores y cesionarios para usar, a
          perpetuidad, tales Grabaciones, así como el nombre de los menor de
          edad y mi nombre, para los siguientes propósitos: publicidad,
          promoción, explotación y/o publicitar cualquier instalación de
          <strong>Sociedad HAPPYLAND Perú S.A.</strong> Además, acepto que lo
          anterior incluye el consentimiento para usar el Niño y/o mi imagen
          física en cualquier forma.
        </p>
        <p style="text-align:justify;">&nbsp;</p>
        <br />
        <p style="text-align:justify;">
          <strong>3 – SOBRE LOS REGLAMENTOS Y PROHIBCIONES</strong>
        </p>
        <br />
        <p style="margin-bottom:.0001pt;text-align:justify;line-height:normal;">
          Reconozco y declaro que antes de hacer uso de las instalaciones de
          <strong>Sociedad HAPPYLAND Perú S.A.</strong>, he leído los
          reglamentos de uso de cada uno de ellos, por lo que manifiesto haber
          sido debido(a) y suficientemente informado(a) en relación a las reglas
          que rigen para mí y aquellos menor de edad &nbsp;respecto de quienes
          autorizo participar en cualquier actividad dentro de los juegos que
          conforman el entretenimiento de
          <strong>Sociedad HAPPYLAND Perú S.A.</strong>
        </p>
        <p style="margin-bottom:.0001pt;text-align:justify;line-height:normal;">
          &nbsp;
        </p>
        <p style="text-align:justify;">
          Asimismo, dejo expresa constancia que entiendo y he explicado las
          referidas reglas a los menores respecto de quienes autorizo
          participar. Reconozco también que en caso no se sigan las reglas
          preestablecidas por <strong>Sociedad HAPPYLAND Perú S.A.</strong>, en
          cada uno de los diferentes juegos de
          <strong>Sociedad HAPPYLAND Perú S.A.</strong>, este comportamiento
          puede resultar en mi exclusión o la de aquellos menores respecto de
          quienes autorizo participar de los juegos, sin tener –ni esperar- un
          resarcimiento o devolución del importe de dinero invertido.
        </p>
        <p>
          <span style='font-family:"Arial",sans-serif;'
            >Según lo regulado en el art. 27° del Reglamento de la Ley de
            Protección de Datos Personales (Ley N° 29733), para el tratamiento
            de los datos personales de un menor de edad, se requiere el
            consentimiento de cualquier de
            <strong>los titulares de la patria potestad o tutores,</strong>
            según corresponda. &nbsp;En ese sentido, cualquier persona no puede
            representar y dar el consentimiento por parte del menor de
            edad.</span
          >
        </p>
        <br />
        <br />
        <strong
          >Padre / tutor legal / poder notarial / participante (si tiene 18 años
          o más): </strong
        >{{ nameParent }}
        <br />
        <strong v-if="adult">
          Nombre de (los/as) menores de edad(s):
        </strong>
        <br />
        <List class="list">
          <ListItem v-for="child in childs" :key="child._id">
            {{ child.names }} {{ child.surname }}
          </ListItem>
        </List>
        <br />
      </Col>
    </Row>
    <Row type="flex" justify="center">
      <Col span="20" style="text-align:center">
        <button
          class="notSignature"
          style="border: none"
          v-if="notSignature"
          @click="signature"
        >
          Firma aquí
        </button>
        <VueSignaturePad
          height="50vh"
          width="50vw"
          v-else
          ref="signaturePad"
          saveType="image/png"
          style="margin: auto; border: 1px solid black;"
        />
      </Col>
    </Row>
    <Row>
      <Col span="12" offset="2">
        <Form ref="form" :model="form" :rules="validateForm">
          <FormItem prop="terms">
            <Checkbox class="font-20" v-model="form.terms"
              >Estoy de acuerdo con los términos y condiciones del
              contrato.</Checkbox
            >
          </FormItem>
        </Form>
      </Col>
    </Row>
    <!-- <pdf
      : page="page"
          @num-pages="numPages = $event"
          style="width:75%"
          src="../static/happyland-contract.pdf"
    ></pdf>-->
    <Row type="flex" justify="space-between">
      <Col span="6">
        <Button v-if="!notSignature" @click="undo">REINTENTAR</Button>
      </Col>
      <Col span="6"
        ><Button :loading="next" @click="nextPage">FINALIZAR</Button>
      </Col>
    </Row>

    <!-- <div>
    <client-only placeholder="Loading...">
      <pdf
        class="pdf"
          : src="require('@/static/happyland-contract.pdf')"
  :page="1"
        ></pdf>
      </client-only>
    </div> -->
    <div id="ticket-div">
      <div id="ticket">
        <img src="../assets/images/logo-happy.jpg" style="max-width: 150px" />
        <h1>TICKET</h1>
        <p>{{ this.actualMoment }}</p>
        <p>{{ this.nameParent }}</p>
        <p>{{ this.birthday.slice(0, 10) }}</p>
        <p>Hijos</p>
        <p v-for="child in childs" :key="child._id">
          {{ child.names }} {{ child.surname }} -
          {{ child.identityDocumentNumber }} - {{ child.age }} años
        </p>
        <p>Gracias  por tu registro. Presenta este ticket y DNI en caja.</p><br>
        <p>En tu próxima visita solo busca tu registro con tu correo electrónico</p>
      </div>
    </div>
  </section>
</template>

<script>
import Vue from "vue";
import VueSignaturePad from "vue-signature-pad";
import localStorage from "localStorage";
// import jsPDF from "jspdf";
import * as Api from "../../server/index";
import "../assets/css/style.css";
import pdfMake from "pdfmake/build/pdfmake";
import pdfFonts from "pdfmake/build/vfs_fonts";
// import VueHtmlToPaper from "vue-html-to-paper";
import moment from "moment";
import print from "print-js";
// Vue.use(VueHtmlToPaper);
pdfMake.vfs = pdfFonts.pdfMake.vfs;
Vue.use(VueSignaturePad);

export default {
  data() {
    const validateTerms = (rule, value, callback) => {
      if (value == false || !value) {
        callback(new Error("Es obligatorio"));
      } else {
        callback();
      }
    };
    return {
      nameParent: "",
      childs: [],
      birthday: "",
      output: null,
      actualMoment: "",
      parentData: {},
      notSignature: true,
      email: "",
      code: "",
      allData: "",
      pdf: "",
      object: {},
      childContract: "",
      next: false,
      adult: false,
      form: {
        terms: false
      }, // single checkbox value
      validateForm: {
        terms: [{ validator: validateTerms, trigger: "change" }]
      }
    };
  },
  methods: {
    signature() {
      this.notSignature = false;
    },
    undo() {
      this.$refs.signaturePad.undoSignature();
    },
    nextPage() {
      this.$refs["form"].validate(async valid => {
        if (valid) {
          // const parent = JSON.parse(localStorage.getItem("data"));
          let idParent = localStorage.getItem("parentId");
          Api.getFatherById(idParent).then(res => {
            this.parentData = res.data;
            this.nameParent =
              this.parentData.names +
              " " +
              this.parentData.surname +
              " - " +
              this.parentData.identityDocumentNumber;
            this.childs = this.parentData.childs;
            this.code = this.parentData.fatherRandom;
            this.email = this.parentData.email;
            this.object = {
              childs: this.childs,
              parentFullName: this.nameParent,
              email: this.email,
              code: this.code
            };
            this.object.childs.forEach(child => {
              this.childContract =
                child.names +
                " " +
                child.surname +
                " -  " +
                child.identityDocumentNumber +
                ", ";
            });

            if (this.notSignature == true) {
              this.$Notice.error({
                title: "Debe firmar"
              });
            } else if (this.$refs.signaturePad == undefined) {
              this.$Notice.error({
                title: "Debe firmar"
              });
            } else {
              const data = this.$refs.signaturePad.saveSignature().data;
              this.next = true;
              var testImageDataUrl = data;
              var docDefinition = {
                content: [
                  {
                    style: "header",
                    text:
                      "Acuerdo del participante, liberación y asunción de riesgos (El Acuerdo) - Sociedad HAPPYLAND Perú S.A."
                  },
                  {
                    style: "header",
                    text:
                      "\n1 - Acuerdo del participante, liberación y asunción de riesgos"
                  },
                  '\nElegí voluntariamente usar y permitir que los menores de edad identificados anteriormente, los cuales se encuentran bajo mi tutela, y han sido referidos individual y colectivamente en este documento como "menor de edad ", usen las instalaciones y equipos de Sociedad HAPPYLAND Perú S.A. ubicados en centro comercial Mall Aventura Santa Anita Zona de Happyland Adventure. En consideración a que se nos permita usar dichas instalaciones y equipos, y cualquier otro servicio proporcionado por Sociedad Happyland Perú S.A. o sus empleados o agentes en dicha ubicación, o en cualquier otra ubicación dentro de la ciudad de Lima, declaro, reconozco y acepto lo siguiente:',
                  "\n•	Reconozco y acepto que este Acuerdo cubre y está destinado a liberar y proporcionar otros beneficios, protecciones legales y consideraciones a favor de Sociedad HAPPYLAND Perú S.A., y sus respectivos agentes y colectivos, propietarios, funcionarios, gerentes, accionistas, afiliados, voluntarios, participantes, empleados, y todas las demás personas o entidades que actúen en cualquier capacidad en su nombre respectivo o colectivo.",
                  "\n•	Reconozco y acepto que el uso de los equipos de la Zona de Happyland Adventure, así como otros equipos de propiedad de Sociedad HAPPYLAND Perú S.A. pueden conllevar riesgos, los cuales incluyen lesiones físicas o emocionales graves, muerte, daños a mí mismo, a los menor de edad  y/o a terceros, y daños a la propiedad personal de cualquiera o todas esas personas. Entiendo que tales riesgos no pueden eliminarse, ya que forman parte inherente de las cualidades esenciales de la actividad recreativa, lo cual acepto y reconozco completamente de forma voluntaria. ",
                  "\n•	Reconozco y acepto que, si bien los empleados de Sociedad HAPPYLAND Perú S.A. supervisan generalmente la Zona de Happyland Adventure y otras actividades localizadas en otras zonas que tienen lugar en los locales de Sociedad HAPPYLAND Perú S.A., no es factible que dichos empleados supervisen las actividades y acciones de todos los clientes en todo momento o en forma simultáneamente. ",
                  "\n•	Reconozco y acepto que yo y los menores de edad estamos participando voluntariamente bajo nuestro propio riesgo.",
                  "\nReconozco y acepto que las acciones o actividades de otros clientes podrían causarme a mí o a los menores de edad lesiones corporales significativas  y que Sociedad HAPPYLAND Perú S.A. no es responsable de las acciones o actividades de clientes que usan las instalaciones de Sociedad HAPPYLAND Perú S.A., incluyendo la zona Happyland Adventure. Algunos de los riesgos incluyen, entre otros, los siguientes:",
                  "\na) Los participantes podrían llegar a morir o quedar paralizados, parcial o totalmente, a través del uso de las instalaciones de Sociedad HAPPYLAND Perú S.A., incluyendo la zona Happyland Adventure.",
                  "\nb) Los participantes pueden sufrir cortes, raspones, golpes, contusiones, conmociones cerebrales, a través del uso del equipo de Sociedad HAPPYLAND Perú S.A., o el contacto con otros participantes o superficies con las que han contactado. Los participantes pueden torcerse, jalar, romperse o lesionarse gravemente externa o internamente la cabeza, cara (incluyendo nariz y dientes / mandíbula), cuello, torso, columna vertebral, brazos, muñecas, manos, piernas, tobillos, pies u otras partes del cuerpo como resultado de caerse del trampolín o de otros equipos, aterrizar de manera inadecuada en los trampolines u otros equipos o ponerse en contacto con otros participantes. Como se señaló en el párrafo a) anterior, tales lesiones pueden conducir a parálisis, desfiguración o muerte. La participación puede provocar un golpe de calor, ataques cardíacos, deshidratación y otros eventos médicos relacionados con el esfuerzo.",
                  "\nc) Los participantes pueden caerse unos sobre otros, resultando en huesos rotos y otras lesiones graves. El doble rebote, más de una persona por trampolín, voltearse, correr y rebotar en las paredes y los trampolines montados en la pared, y otros movimientos corporales participantes (ya sean planificados o no) pueden crear un efecto de rebote y conducir a movimientos corporales impredecibles y anticipados o contacto corporal no anticipado, cualquiera de los cuales puede provocar lesiones graves.",
                  "\nd) Hacer uso del área de los trampolines, puede provocar lesiones físicas similares (incluso si el participante no está rebotando en ese momento).",
                  "\ne) Observar, pararse, sentarse o tomar fotografías en o cerca de cualquier trampolín o actividad puede ocasionar lesiones físicas similares (incluso si el observador no participa en ese momento).",
                  "\n•	Reconozco, acepto y asumo el riesgo de todas y cada una de las condiciones médicas, limitaciones o discapacidades (ya sean temporales o permanentes) que yo o los menor es de edad  poseamos, ya sean conocidas o desconocidas, que puedan contribuir o exacerbar cualquier lesión que yo o los menores de edad  podríamos sostener como resultado del uso de las instalaciones de Sociedad HAPPYLAND Perú S.A. o cualquiera de sus equipos. ",
                  "\n•	Reconozco y acepto que si se requiere o se realiza asistencia médica (de cualquier forma, incluida la atención de emergencia, hospitalización, atención ambulatoria y/o fisioterapia) como resultado de cualquier lesión que yo o los menores de edad suframos mientras usamos la Zona de Happyland Adventure o cualquier otra zona de Sociedad HAPPYLAND Perú S.A., dicha asistencia correrá por mi cuenta. Sin perjuicio de ello, Sociedad HAPPYLAND Perú S.A. podrá prestar primeros auxilios en caso sea necesario, conforme sus políticas internas.",
                  {
                    style: "header",
                    text: "\n2 - FOTO / VIDEO / RENUNCIA A MEDIOS SOCIALES"
                  },
                  "\nEn relación con el uso de las instalaciones de la zona Happyland Adventure y otras zonas a las que yo y los menor de edad podamos tener acceso, en mi calidad de titular de la patria potestad o tutor de los menores, doy mi consentimiento libre, previo, expreso e inequívoco para el tratamiento de mis datos personales y los de los menores.",
                  '\nEn ese sentido, doy mi autorización para la grabación de los menores de edad  y mi imagen física y/o voz a través de medios mecánicos, fotográficos, técnicos, digitales, electrónicos u otros ("Grabaciones"). Por la presente, doy mi consentimiento y autorizo ​​a Sociedad HAPPYLAND Perú S.A. y sus agentes, representantes, empleados, sucesores y cesionarios para usar, a perpetuidad, tales Grabaciones, así como el nombre de los menor de edad y mi nombre, para los siguientes propósitos: publicidad, promoción, explotación y/o publicitar cualquier instalación de Sociedad HAPPYLAND Perú S.A. Además, acepto que lo anterior incluye el consentimiento para usar el Niño y/o mi imagen física en cualquier forma. ',
                  {
                    style: "header",
                    text: "\n3 – SOBRE LOS REGLAMENTOS Y PROHIBCIONES"
                  },
                  "\nReconozco y declaro que antes de hacer uso de las instalaciones de Sociedad HAPPYLAND Perú S.A., he leído los reglamentos de uso de cada uno de ellos, por lo que manifiesto haber sido debido(a) y suficientemente informado(a) en relación a las reglas que rigen para mí y aquellos menor de edad  respecto de quienes autorizo participar en cualquier actividad dentro de los juegos que conforman el entretenimiento de Sociedad HAPPYLAND Perú S.A.",
                  "\nAsimismo, dejo expresa constancia que entiendo y he explicado las referidas reglas a los menores respecto de quienes autorizo participar. Reconozco también que en caso no se sigan las reglas preestablecidas por Sociedad HAPPYLAND Perú S.A., en cada uno de los diferentes juegos de Sociedad HAPPYLAND Perú S.A., este comportamiento puede resultar en mi exclusión o la de aquellos menores respecto de quienes autorizo participar de los juegos, sin tener –ni esperar- un resarcimiento o devolución del importe de dinero invertido.",
                  `\nNombres y apellidos: ${this.object.parentFullName}`,
                  `\nHijos: ${this.childContract}`,
                  "\nFirma",
                  {
                    image: testImageDataUrl,
                    width: 200
                  }
                ],
                images: {
                  bee: testImageDataUrl
                },
                styles: {
                  header: {
                    fontSize: 18,
                    bold: true
                  }
                },
                defaultStyle: {
                  alignment: "justify"
                }
              };
              const pdfDocGenerator = pdfMake.createPdf(docDefinition);
              pdfDocGenerator.getBase64(data => {
                console.log(data);
                this.pdf = "data:application/pdf;base64," + data;
                Api.sendEmail(this.object.email, this.object.code, this.pdf)
                  .then(res => {
                    this.next = false;
                    printJS({
                      printable: "ticket",
                      type: "html",
                      maxWidth: 200
                    });
                    this.$router.push("./thanks");
                  })
                  .catch(err => {
                    this.$Notice.error({
                      title: "Ocurrió un error",
                      desc: "Por favor, inténtelo nuevamente."
                    });
                  });
              });
            }
          });
        } else {
          this.$Notice.error({
            title: "Error de registro",
            desc: "Debe aceptar términos y condiciones para poder continuar"
          });
        }
      });
    }
  },
  async created() {
    moment.locale("es");
    this.actualMoment = moment().format("LLLL");
    let idParent = localStorage.getItem("parentId");
    Api.getFatherById(idParent).then(res => {
      this.parentData = res.data;
      if (
        moment(this.parentData.birthday).isAfter(moment().subtract(18, "years"))
      ) {
        this.adult = false;
      } else {
        this.adult = true;
      }
      this.nameParent =
        this.parentData.names +
        " " +
        this.parentData.surname +
        " - " +
        this.parentData.identityDocumentNumber;
      this.childs = this.parentData.childs;
      this.birthday = this.parentData.birthday.slice(0, 10);
      console.log(this.childs);
    });
  }
};
</script>

<style scoped>
.pdf {
  border: 1px solid red;
  width: 100%;
  height: 100%;
}
.notSignature {
  background-color: #fcfeff;
  color: #338dc8;
  border: none;
  height: 50vh;
  font-family: "Montserrat-light";
}
.notSignature:focus {
  outline: 0;
}
</style>
